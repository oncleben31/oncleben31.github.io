<!DOCTYPE html>
<html lang="fr">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Déploiement de Jekyll sur Github Pages</title>
  <meta name="description" content="Jekyll et Github Pages sont étroitement liés. En effet, Github permet d’utiliser des sources Jekyll dans un dépôt pour générer automatiquement les pages HTML...">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://oncleben31.cc/article/deploiement-jekyll-sur-github-pages/">
  <link rel="alternate" type="application/rss+xml" title="Oncleben31.cc" href="/feed.xml">

  <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-10458131-3', 'auto');
  ga('send', 'pageview');

</script>
  

  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">

    <a class="site-title" href="/">Oncleben31.cc</a>

    <nav class="site-nav">
      <span class="menu-icon">
        <svg viewBox="0 0 18 15" width="18px" height="15px">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </span>

      <div class="trigger">
        
          
        
          
          <a class="page-link" href="/a-propos/">À propos</a>
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Déploiement de Jekyll sur Github Pages</h1>
    <p class="post-meta"><time datetime="2016-10-16T00:00:00+00:00" itemprop="datePublished">



























Le 16 octobre 2016
</time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">oncleben31</span></span></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p><strong>Jekyll</strong> et <strong>Github Pages</strong> sont étroitement liés. En effet, Github permet d’utiliser des sources Jekyll dans un dépôt pour générer automatiquement les pages HTML associées. Le site sera alors accessible à une adresse du type <code class="highlighter-rouge">your_pseudo.github.io</code>.</p>

<p>Conséquence, il est assez facile d’héberger gratuitement son site Jekyll grâce à Github Pages.</p>

<p>Dans cet article, je donne quelques astuces que j’ai utilisées pour réussir l’installation d’un site Jekyll avec le thème minima sur Github Pages. Par contre, je ne reprendrai pas toutes les étapes qui sont décrites à plein d’autres endroits sur Internet.</p>

<h2 id="avantages-et-inconvénients">Avantages et Inconvénients</h2>

<p>Pour commencer une petite comparaison des avantages et inconvénients liées au choix d’héberger son Jekyll sur Github Pages. Vous trouverez ci-dessous des évidences mais aussi des subtilités que j’ai découvertes en testant ou creusant certaines fonctionnalités.</p>

<p>Les avantages liés à l’utilisation de Github Pages sont:</p>

<ul>
  <li>l’hébergement est gratuit ;</li>
  <li>il n’y a pas de maintenance du serveur ou de dépendances à gérer. Github s’occupe de tout ;</li>
  <li>la gestion de configuration et la sauvegarde est garantie par construction (basée sur <strong>Git</strong>) ;</li>
  <li>l’utilisation d’outils d’intégration continue est facile et gratuit ;</li>
  <li>il y a une grosse communauté regroupant les éditeurs de sites basés sur Jekyll et hébergés sur Github Pages. Facile de voir les sources des autres et de demander de l’aide.</li>
</ul>

<p>Les inconvénients liés à l’utilisation de Github Pages sont:</p>

<ul>
  <li>sauf si vous êtes un utilisateur payant, votre dépôt sur Github est public. Vos sources sont donc visibles ;</li>
  <li>Github limite les plugins utilisables. Si vous voulez ou devez utiliser des plugins autres que ceux autorisés par Github, vous ne pourrez pas générer automatique votre site web à partir des sources. (un contournement est possible) ;</li>
  <li>si vous voulez utiliser votre propre nom de domaine, il sera associé à tous les dépôts de votre compte. (un contournement est possible) ;</li>
  <li>Github gère sa propre liste de dépendances. Il se peut que la dernière version de certain modules ne soit pas déployé immédiatement. Exemple Jekyll 3.3.0 sortie le 6 octobre 2016 n’est toujours pas disponible dans la gem github-pages.</li>
</ul>

<h2 id="les-patchs">Les patchs</h2>

<p>Lorsque j’ai commencé la mise en place de ce blog. La gem github-pages était en version v97 et basée sur jekyll v3.2.1 et minima v1.2.0.
Le theme minima dans cette version avait besoin d’être modifié pour fonctionner correctement en local. Mes patchs sont disponibles dans les commits suivants :</p>

<ul>
  <li><a href="https://github.com/jekyll/minima/pull/46/commits/046abe81ffb0f88c698cb6b5c10f5a489ce6a14d">046abe81ffb0f88c698cb6b5c10f5a489ce6a14d</a></li>
  <li><a href="https://github.com/jekyll/minima/pull/46/commits/c5f4ca38e4d81a4e822f4e3f0b9cbe8a00a781cb">c5f4ca38e4d81a4e822f4e3f0b9cbe8a00a781cb</a></li>
</ul>

<p>Ces correctifs sont inclus depuis la version v2.0.0 de minima.</p>

<h2 id="le-paramétrage">Le paramétrage</h2>

<p>Il y a une astuce pour que le site fonctionne en local et sur Github Pages. Ma solution consiste a utiliser deux fichiers de configuration:</p>

<ul>
  <li><code class="highlighter-rouge">_config.yml</code> qui contient le paramétrage pour l’environnement de production</li>
  <li><code class="highlighter-rouge">_config.dev.yml</code> qui contient une surcharge de deux paramètres pour garantir le fonctionnement en local.</li>
</ul>

<p>Le fichier <code class="highlighter-rouge">_config.dev.yml</code>:</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="c1"># config for local testing</span>
<span class="c1"># use it with: bundle exec jekyll serve --host 0.0.0.0 --config _config.yml,_config_dev.yml</span>

<span class="s">baseurl</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span> <span class="c1"># the subpath of your site, e.g. /blog</span>
<span class="s">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span> <span class="c1"># the base hostname &amp; protocol for your site</span>
</code></pre>
</div>

<p>Pour utiliser ce double paramétrage il faut lancer lee serveur local avec la commande:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>bundle <span class="nb">exec </span>jekyll serve --config _config.yml,_config_dev.yml
</code></pre>
</div>

<h2 id="la-branche">La branche</h2>

<p>Pour pouvoir utiliser Github Pages pour héberger votre site vous devez installer vos sources Jekyll dans la branche <code class="highlighter-rouge">master</code> ou <code class="highlighter-rouge">gh-pages</code>. Attention, si vous utilisez le dépôt <code class="highlighter-rouge">votre_pseudo.github.io</code>, vous ne pouvez utiliser que la branche <code class="highlighter-rouge">master</code>.</p>

<p>Le choix du nom du dépôt et de la branche de travail doit être “réfléchi” car il donne des contraintes à prendre en compte si vous voulez faire une génération hors Github ou si vous voulez utiliser votre nom de domaine personnalisé.</p>

<h2 id="les-contournements">Les contournements</h2>

<p>J’ai listé, plus haut, quelques inconvénients qui sont contournables.</p>

<h3 id="github-pages-et-plugins">Github Pages et plugins</h3>

<p>Le premier contournement concerne les plugins qui ne sont pas toléré par Github Pages. Le contournement consiste à continuer à gérer ses sources sur Github (sur la branche master par exemple), mais faire la génération des pages a l’extérieurs de Github et de les synchroniser avec la branche gh-pages. La génération pouvant se la faire manuellement en local sur votre machine, ou automatiquement avec un outil d’intégration continue comme <a href="http://travis-ci.org">Travis CI</a> par exemple.</p>

<p>Si vous voulez allez plus loin dans ce type de solution je vous conseille de regarder <a href="https://gist.github.com/domenic/ec8b0fc8ab45f39403dd">le Gist de Domenic Denicola</a>.</p>

<h3 id="github-pages-et-nom-de-domaine">Github Pages et nom de domaine</h3>
<p>Le second contournement concerne le nom de domaine. Il est relativement facile d’acheter un nom de domaine et de le rediriger vers Github pour remplacer les URL du type <code class="highlighter-rouge">votre_pseudo.github.io/votre_depot</code>. Par contre, tous les dépôt de votre compte utilisant Github Pages seront accessibles sur votre nom de domaine. Le contournement consiste à créer une organisation pour votre projet. D’héberger le dépôt de votre site avec cette organisation et de diriger votre nom de domaine vers le dépôt de l’organisation. Ainsi le nom de domaine ne sera pas pollué par vos autres dépôts.</p>

  </div>
  






  

    
    

    

    

  

    
    

    

    
      
        <div class="relatedPosts">
        <hr>
        <h2>Vous devriez être aussi intéressé par :</h2>
        <ul>
        
      
      <li>
      <a href="/article/seo-initiation-referencement/">Initiation au référencement : à lire avant de commencer son blog <span class="label label-default">jekyll</span> </a> - publié le 



























4 oct. 2016

      </li>
      
      
    

  

    
    

    

    
      
      <li>
      <a href="/article/jekyll-vagrant-virtualbox/">Jekyll dans une machine virtuelle avec Vagrant et VirtualBox <span class="label label-default">jekyll</span> </a> - publié le 



























18 sept. 2016

      </li>
      
      
    

  

    
    

    

    

  

</ul>
</div>



  
    
  

  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'http://oncleben31.cc/article/deploiement-jekyll-sur-github-pages/';
      this.page.identifier = 'http://oncleben31.cc/article/deploiement-jekyll-sur-github-pages/';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://oncleben31-cc.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


  
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Oncleben31.cc</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              Oncleben31.cc
            
            </li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/oncleben31"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">oncleben31</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/oncleben31"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">oncleben31</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Les contributions à l&#39;Open Source et les découvertes d&#39;Oncleben31 partagées avec l&#39;Internet mondial.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
